datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

// Enums
enum Role {
  super_admin
  admin
  user
}

enum TripType {
  bus
  hotel
  train
  flight
  car
  boat
  bike
  motobike
  other
}

enum BookingStatus {
  pending
  confirmed
  cancelled
}

enum PlaceCategory {
  temple
  beach
  restaurant
  market
  other
}

// Models
model User {
  id        Int       @id @default(autoincrement())
  email     String    @unique
  password  String
  name      String
  role      Role      @default(user)
  bookings  Booking[]
  reviews   Review[]
}

model Trip {
  id          Int       @id @default(autoincrement())
  title       String
  description String
  locationId  Int
  location    Location  @relation(fields: [locationId], references: [id])
  type        TripType
  startDate   DateTime
  endDate     DateTime
  price       Float
  bookings    Booking[]
}

model Location {
  id          Int       @id @default(autoincrement())
  name        String
  country     String
  description String
  lat         Float
  long        Float
  trips       Trip[]
  places      Place[]
}

model Booking {
  id          Int           @id @default(autoincrement())
  tripId      Int
  userId      Int
  bookingDate DateTime
  status      BookingStatus @default(pending)
  trip        Trip          @relation(fields: [tripId], references: [id])
  user        User          @relation(fields: [userId], references: [id])
}

model Place {
  id          Int           @id @default(autoincrement())
  name        String
  description String
  locationId  Int
  category    PlaceCategory
  imageUrl    String
  location    Location      @relation(fields: [locationId], references: [id])
  reviews     Review[]
}

model Review {
  id          Int       @id @default(autoincrement())
  placeId     Int
  userId      Int
  rating      Int
  comment     String?
  place       Place     @relation(fields: [placeId], references: [id])
  user        User      @relation(fields: [userId], references: [id])
}